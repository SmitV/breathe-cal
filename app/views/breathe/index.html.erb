<div style="height: 100%;">

<!-- profile sign in and profile icon START -->
  <% if current_client %>
    <% p asset_path("images/bee_marker.png")%>
    <% resp = HTTParty.get('https://www.googleapis.com/plus/v1/people/'+current_client.uid+'?fields=image&key=AIzaSyD5n5xHL4TbbHjVE_gxkVw6f-CRVyN8npc').body%>
    <% result = JSON.parse resp%>
    <% begin; source = result['image']['url']; custom = true; rescue Exception; custom = false; end%>
    <% begin; is_default =  result['image']['isDefault']; rescue Exception; is_default = "true"; end%>
    <%userName = current_client.name%>
    <%firstLetter = userName[0]%>
  
    <div onclick= "profileClick()" id = "profile-icon" class = "round-hover">
      <% if is_default%>
        <div  id = "profile-image">
          <%= firstLetter %>
        </div>
      <% else %>
        <img class= "img-circle round" src=<%=source%>>
      <% end %>
      <div id="arrow" class = "arrow-up"></div> 
      <div id="myDropdown" class="dropdown-content drop-allign">
        <div id="user-name-header">
          <%=current_client.name %>
        </div>
        <% if !is_default %>
          <img class= "profile-custom-header"src=<%=source%>>
        <% else %>
          <div  id = "profile-image-header">
            <%= firstLetter %>
          </div>
        <% end %>
        <div id = "spacing"></div>
        <a href="#friends" class="dropdown-sub-title">Friends</a>
        <div onclick= "settingsClick()", class="dropdown-sub-title">
          <a>Settings</a>
        </div>
        <%= link_to 'Sign Out', signout_path, id: "sign_out", class: "dropdown-sub-title" %>
      </div>
      
      <div id="settingsDropdown" class="dropdown-content drop-allign">
        <div id="user-name-header">
          <%=current_client.name %>
        </div>
        <% if !is_default %>
          <img class= "profile-custom-header"src=<%=source%>>
        <% else %>
          <div  id = "profile-image-header">
            <%= firstLetter %>
          </div>
        <% end %>
        <div id = "spacing"></div>
       
        <div class="dropdown-sub-title-settings">
          <div id = 'location-icon'></div>
          Location preferences
        </div>
        <div class="dropdown-sub-title-content">
          Default Location:   </br> 
        </div> 
        <div class="dropdown-sub-title-content">
          <input type="text" style="width: 65%;" placeholder="no location set" id="saved_location_text" />
          <button id = 'location-btn' class = 'settings-btn' type="submit" value="Save" style="float: right">Save</button>
        </div> 
        
        <div class="dropdown-sub-title-settings"> 
          <div id="language-icon"></div>
          Language preferences
        </div>
        <div class="dropdown-sub-title-content">
          Select Language: </br>
        </div>
        <div class="dropdown-sub-title-content">
          <select class="languageSelect">
          	<option value="nl">English</option>
          	<option value="af">Afrikaans</option>
          	<option value="sq">Albanian</option>
          	<option value="am">Amharic</option>
          	<option value="ar">Arabic</option>
          	<option value="hy">Armenian</option>
          	<option value="az">Azerbaijani</option>
          	<option value="eu">Basque</option>
          	<option value="be">Belarusian</option>
          	<option value="bn">Bengali</option>
          	<option value="bs">Bosnian</option>
          	<option value="bg">Bulgarian</option>
          	<option value="ca">Catalan</option>
          	<option value="ceb">Cebuano</option>
          	<option value="ny">Chichewa</option>
          	<option value="zh-CN">Chinese (Simplified)</option>
          	<option value="zh-TW">Chinese (Traditional)</option>
          	<option value="co">Corsican</option>
          	<option value="hr">Croatian</option>
          	<option value="cs">Czech</option>
          	<option value="da">Danish</option>
          	<option value="nl">Dutch</option>
          	<option value="eo">Esperanto</option>
          	<option value="et">Estonian</option>
          	<option value="tl">Filipino</option>
          	<option value="fi">Finnish</option>
          	<option value="fr">French</option>
          	<option value="fy">Frisian</option>
          	<option value="gl">Galician</option>
          	<option value="ka">Georgian</option>
          	<option value="de">German</option>
          	<option value="el">Greek</option>
          	<option value="gu">Gujarati</option>
          	<option value="ht">Haitian Creole</option>
          	<option value="ha">Hausa</option>
          	<option value="haw">Hawaiian</option>
          	<option value="iw">Hebrew</option>
          	<option value="hi">Hindi</option>
          	<option value="hmn">Hmong</option>
          	<option value="hu">Hungarian</option>
          	<option value="is">Icelandic</option>
          	<option value="ig">Igbo</option>
          	<option value="id">Indonesian</option>
          	<option value="ga">Irish</option>
          	<option value="it">Italian</option>
          	<option value="ja">Japanese</option>
          	<option value="jw">Javanese</option>
          	<option value="kn">Kannada</option>
          	<option value="kk">Kazakh</option>
          	<option value="km">Khmer</option>
          	<option value="ko">Korean</option>
          	<option value="ku">Kurdish (Kurmanji)</option>
          	<option value="ky">Kyrgyz</option>
          	<option value="lo">Lao</option>
          	<option value="la">Latin</option>
          	<option value="lv">Latvian</option>
          	<option value="lt">Lithuanian</option>
          	<option value="lb">Luxembourgish</option>
          	<option value="mk">Macedonian</option>
          	<option value="mg">Malagasy</option>
          	<option value="ms">Malay</option>
          	<option value="ml">Malayalam</option>
          	<option value="mt">Maltese</option>
          	<option value="mi">Maori</option>
          	<option value="mr">Marathi</option>
          	<option value="mn">Mongolian</option>
          	<option value="my">Myanmar (Burmese)</option>
          	<option value="ne">Nepali</option>
          	<option value="no">Norwegian</option>
          	<option value="ps">Pashto</option>
          	<option value="fa">Persian</option>
          	<option value="pl">Polish</option>
          	<option value="pt">Portuguese</option>
          	<option value="pa">Punjabi</option>
          	<option value="ro">Romanian</option>
          	<option value="ru">Russian</option>
          	<option value="sm">Samoan</option>
          	<option value="gd">Scots Gaelic</option>
          	<option value="sr">Serbian</option>
          	<option value="st">Sesotho</option>
          	<option value="sn">Shona</option>
          	<option value="sd">Sindhi</option>
          	<option value="si">Sinhala</option>
          	<option value="sk">Slovak</option>
          	<option value="sl">Slovenian</option>
          	<option value="so">Somali</option>
          	<option value="es">Spanish</option>
          	<option value="su">Sundanese</option>
          	<option value="sw">Swahili</option>
          	<option value="sv">Swedish</option>
          	<option value="tg">Tajik</option>
          	<option value="ta">Tamil</option>
          	<option value="te">Telugu</option>
          	<option value="th">Thai</option>
          	<option value="tr">Turkish</option>
          	<option value="uk">Ukrainian</option>
          	<option value="ur">Urdu</option>
          	<option value="uz">Uzbek</option>
          	<option value="vi">Vietnamese</option>
          	<option value="cy">Welsh</option>
          	<option value="xh">Xhosa</option>
          	<option value="yi">Yiddish</option>
          	<option value="yo">Yoruba</option>
          	<option value="zu">Zulu</option>
          </select>
          </br>
        </div> 
        
        <div id = "spacing"></div>
        <div class="dropdown-sub-title-settings"> 
          <div id="email-icon"></div>
          Email preferences
        </div>
        <div class="dropdown-sub-title-content">
          Email address: </br>
          </br>
          <input type="text" style="width: 65%;" placeholder="no email saved" id="saved_email_text"/>
          <button id 'email-btn' class = 'settings-btn' type="submit" value="Save" style="float: right">Save</button>
          </br>
        </div> 
        <div class="dropdown-sub-title-content" id="accordion">
          Receive alert emails? 
            <label class="switch" style="float: right" data-toggle="collapse" data-target="#collapseAlertEmails">
              <input type="checkbox">
              <span class="slider round"></span>
            </label>
          </br>
          <div id="collapseAlertEmails" class="dropdown-sub-title collapse out">
            <ul class="checkbox"> 
              <li><input type="checkbox" id="cb1" value="Cats" /><label for="cb1">Cats</label></li> 
              <li><input type="checkbox" id="cb2" value="Bees" /><label for="cb2">Bees</label></li> 
              <li><input type="checkbox" id="cb3" value="Perfume" /><label for="cb3">Perfume</label></li> 
              <li><input type="checkbox" id="cb4" value="Oak" /><label for="cb4">Oak</label></li> 
              <li><input type="checkbox" id="cb5" value="Peanut" /><label for="cb5">Peanut</label></li> 
              <li><input type="checkbox" id="cb6" value="Gluten" /><label for="cb6>">Gluten</label></li> 
              <li><input type="checkbox" id="cb7" value="Dog" /><label for="cb7>">Dog</label></li> 
              <li><input type="checkbox" id="cb8" value="Dust" /><label for="cb8>">Dust</label></li> 
              <li><input type="checkbox" id="cb9" value="Smoke" /><label for="cb9>">Smoke</label></li> 
              <li><input type="checkbox" id="cb10" value="Mold" /><label for="cb10>">Mold</label></li> 
            </ul> 
          </div>
        </div> 
        
        
        <div class="dropdown-sub-title-content" id="accordion">
          Receive daily update? 
            <label class="switch" style="float: right" data-toggle="collapse" data-target="#collapseDailyUpdate">
              <input type="checkbox">
              <span class="slider round"></span>
            </label>
          </br>
          <div id="collapseDailyUpdate" class="dropdown-sub-title collapse out">
            </br>
              <input type="checkbox"> Cats
              <input type="checkbox"> Bees
            </br>
              <input type="checkbox"> Perfume
              <input type="checkbox"> Oak
            </br>
            <input type="checkbox"> Peanut
            <input type="checkbox"> Gluten
            </br>
            <input type="checkbox"> Dog
            <input type="checkbox"> Dust
            </br>
            <input type="checkbox"> Smoke
            <input type="checkbox"> Mold
            </br>
          </div>
        </div> 
        
        
        <div onclick= "backClick()", class="dropdown-sub-title">
          <a>Back</a>
        </div>
      </div>
      
    </div>
  <% else %>
    <%= link_to "Sign in", "/auth/google_oauth2", id: "log-in", class: "button"%>
  <% end %>    
  

<script>
  function profileClick() {
    document.getElementById("arrow").classList.toggle("show")
    if (document.getElementById("myDropdown").style.display == "none"){
      
      console.log(document.getElementById("myDropdown").style.visibility);
      document.getElementById("settingsDropdown").classList.toggle("show");
    } else{
      console.log(document.getElementById("myDropdown").style.visibility);
      document.getElementById("myDropdown").classList.toggle("show");
    }
  }

  function settingsClick() {
    document.getElementById("myDropdown").classList.toggle("show");
    document.getElementById("arrow").classList.toggle("show")
    document.getElementById("settingsDropdown").classList.toggle("show");
    document.getElementById("alertsDropdown").classList.toggle("show");
  }
  
  function alertClick() {
    document.getElementById("alertsDropdown").classList.toggle("show");
  }
  
  function backClick() {
    document.getElementById("settingsDropdown").classList.toggle("show");
    document.getElementById("arrow").classList.toggle("show")
    document.getElementById("myDropdown").classList.toggle("show");
  }
  
  

  function deleteMarker(id) {
    $.ajax({
        type: "DELETE",
        contentType: "application/json; charset=utf-8",
        url: "markers",
        data: JSON.stringify({id: id}),
        success: function() {
          
        }
    });
  }
 
</script>
<!-- profile sign in and profile icon END -->

  <div class="col-md-4 col-ms-12" style="padding-left: 0; padding-right: 0; max-width: 500px;" id="right-col">
    <!--<div style="text-align: right; font-size: 15px; padding: 10px 15px; border-bottom-width: 1px; border-bottom-color: #eee; border-bottom-style: solid;">-->
    <!--</div>-->
   
  
    

    
    <div id="fox-box" style="height: 120px;">
      <%= render 'fox_box' %>
    </div>
    <div id="list-box" style="position: absolute; width: 100%;">
      <%= render 'list' %>  
    </div>
    <div id="detail-box" style="margin-left: 500px; background-color: white; position: absolute; width: 100%; overflow-x: hidden; overflow-y: scroll; z-index: 10;">
    </div>
    <div id="detail-box-mask" style="margin-left: 500px; background-color: white; position: absolute; width: 100%; overflow-x: hidden; overflow-y: scroll; z-index: 10;"></div>
    <br>
    <div id="logo" style="text-align: center; position: absolute; width: 100%; bottom: 10px; z-index: 5;">
      <%= link_to(image_tag('bcal.jpg', :style => "width: 160px;"), "http://www.breathebayarea.org") %>
          <div type="button" data-toggle="modal" data-target="#myModal">
            <a>Learn more about this project</a>
          </div>
    </div>
    </div>
    
    

  </div>  
  
    <div class="col-md-8 col-ms-12" style="padding-left: 0; padding-right: 0; z-index: 10; height: 100%;" id="left-col">
    <input id="pac-input" class="controls" type="text" placeholder="Search">
    <button id="search-button" class="controls">🔍</button>
    <button id="find-my-location"> <img id = "loc-img" height="30" width="30" src="https://cdn3.iconfinder.com/data/icons/glypho-travel/64/map-pin-marker-circle-512.png"> </button>
   
   
   
    <!--<button id="clean-air"> <img id = "loc-img" height="30" width="30" src="http://cleanairasia.org/wp-content/uploads/2015/07/Air_Quality_and_Climate_Change.png"> </button>-->
    <button id="clean-air-button" class="controls"></button>
  
    <div id="clean-air" class="onoffswitch">
        <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch" checked>
        <label class="onoffswitch-label" for="myonoffswitch">
            <span class="onoffswitch-inner"></span>
            <span class="onoffswitch-switch"></span>
        </label>
    </div>
    
  
    <div id="map" style="height: 100%; width: 100%;"></div>
  
  </div>
<!-- Button trigger modal -->

<!-- Modal -->
 <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
   <div class="modal-dialog" role="document">
     <div class="modal-content">
       <div class="modal-body" style="padding: 20px;">
         <%= render 'about' %>
       </div>
     </div>
   </div>
 </div>
 

  <%= javascript_include_tag "application", "data-turbolinks-track" => "reload" %>
<!--<script src="//nmp.newsgator.com/NGBuzz/buzz.ashx?buzzId=146282&apiToken=C8A8F8F5025D418F8AACB0A7FB2A799A&trkP=6d55b36b-8f3d-4003-b27d-ab20d60a3e6f%2Ceb799aa0-ab4c-4906-9d8f-19aaa62a99eb&trkM=29FA7D07-CEE9-C94B-3CF2-BA83A24ABFAC" type="text/javascript"></script>-->
</div>
